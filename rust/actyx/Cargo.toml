# Only have one member per line and the opening and ending on separate lines,
# since this is used in build scripts to populate the docker image cache!
[workspace]
members = [
  "api",
  "ax",
  "ax-futures-util",
  "certs",
  "settings",
  "crypto",
  "libp2p-streaming-response",
  "node",
  "node-ffi",
  "node-manager-bindings",
  "node-win",
  "runtime",
  "swarm",
  "swarm/cli",
  "swarm/harness",
  "tracing_win_event_log",
  "trees",
  "util",
]
resolver = "2"

# This can only be set per workspace. In release, we rely on a setting a custom
# panic hook (see `node/src/util.rs::init_panic_hook`), which safely brings
# down the application after the stack has been wound down.
[profile.release]
panic = "unwind"
[profile.dev]
panic = "abort"

[patch.crates-io]
# wait for ipfs-embed 0.23
ipfs-embed = { git = "https://github.com/Actyx/ipfs-embed", branch = "sim-open" }
banyan = { git = "https://github.com/Actyx/banyan", branch = "rku/logging" }
libp2p = { git = "https://github.com/Actyx/rust-libp2p", branch = "sim-open" }
libp2p-bitswap = { git = "https://github.com/Actyx/libp2p-bitswap", branch = "sim-open" }
libp2p-broadcast = { git = "https://github.com/Actyx/libp2p-broadcast", branch = "sim-open-2" }
libp2p-quic = { git = "https://github.com/Actyx/libp2p-quic", branch = "sim-open-2" }
libp2p-blake-streams = { git = "https://github.com/Actyx/blake-streams", branch = "sim-open" }
ipfs-sqlite-block-store = { git = "https://github.com/Actyx/ipfs-sqlite-block-store", branch = "rku/slowness" }
